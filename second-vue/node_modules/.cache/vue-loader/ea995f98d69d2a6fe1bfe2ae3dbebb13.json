{"remainingRequest":"D:\\1-4\\second-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\1-4\\second-vue\\src\\views\\UserManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\1-4\\second-vue\\src\\views\\UserManage.vue","mtime":1603118254000},{"path":"D:\\1-4\\second-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\1-4\\second-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\1-4\\second-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJVc2VyTWFuYWdlIiwKICAgIGRhdGEgKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHVzZXJEYXRhOltdLAogICAgICAgICAgICBkaWFsb2dUaXRsZTogewogICAgICAgICAgICAgICAgYWRkVXNlcjogIuaWsOWinueUqOaItyIsCiAgICAgICAgICAgICAgICBlZGl0VXNlcjogIue8lui+keeUqOaItyIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGlhbG9nU3RhdHVzOiAiIiwKICAgICAgICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLAogICAgICAgICAgICB1c2VyOnsKICAgICAgICAgICAgICAgIGVuYWJsZWQ6ZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZm9ybUxhYmVsV2lkdGg6ICIxMjBweCIsCiAgICAgICAgICAgIHJ1bGVzOiB7CiAgICAgICAgICAgICAgICBuYW1lOiBbCiAgICAgICAgICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWnk+WQjScsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgdXNlcm5hbWU6IFsKICAgICAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl55m75b2V5ZCNJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICBwYXNzd29yZDogWwogICAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICflr4bnoIHkuI3og73kuLrnqbonfSwKICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdudW1iZXInLCBtZXNzYWdlOiAn5bm06b6E5b+F6aG75Li65pWw5a2X5YC8J30KICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgfSwKICAgICAgICB9CiAgICB9LAogICAgY3JlYXRlZCgpIHsKICAgICAgICB0aGlzLmZpbmRBbGxVc2VycygpOwogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBzaG93RWRpdFZpZXcgKHJvdykgewogICAgICAgICAgICB0aGlzLnVzZXIgPSByb3c7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlOwogICAgICAgICAgICB0aGlzLmRpYWxvZ1N0YXR1cyA9ICJlZGl0VXNlciI7CiAgICAgICAgfSwKICAgICAgICBzdWJtaXQgKCkgewogICAgICAgICAgICBpZiAodGhpcy5kaWFsb2dTdGF0dXMgPT09ICdhZGRVc2VyJyl7CiAgICAgICAgICAgICAgICB0aGlzLnN1Ym1pdFVzZXIoKTsKICAgICAgICAgICAgfSBlbHNlIGlmKHRoaXMuZGlhbG9nU3RhdHVzID09PSAiZWRpdFN0dWRlbnQiKSB7CiAgICAgICAgICAgICAgICB0aGlzLmVkaXRVc2VyKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGVkaXRVc2VyICgpIHsKCiAgICAgICAgfSwKICAgICAgICBzdWJtaXRVc2VyICgpIHsKICAgICAgICAgICAgdGhpcy4kcmVmcy51c2VyLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kYXhpb3MucG9zdCgiL3VzZXIvYWRkVXNlciIsdGhpcy51c2VyKS50aGVuKCAocmVzcCk9PnsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3ApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXNlciA9IHt9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIua3u+WKoOaIkOWKn++8gSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maW5kQWxsVXNlcnMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnJvcik9PnsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5re75Yqg5pWw5o2u5aSx6LSl77yM5Y6f5Zug5pivJytlcnJvci5kYXRhLm1lc3NhZ2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmiYDmnInlrZfmrrUnLAogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgYWRkVXNlciAoKSB7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlOwogICAgICAgICAgICB0aGlzLmRpYWxvZ1N0YXR1cyA9ICJhZGRVc2VyIjsKICAgICAgICB9LAogICAgICAgIGZpbmRBbGxVc2VycyAoKSB7CiAgICAgICAgICAgIHRoaXMuJGF4aW9zLmdldCgidXNlci9maW5kQWxsVXNlcnMiKS50aGVuICggKHJlc3ApPT57CiAgICAgICAgICAgICAgICB0aGlzLnVzZXJEYXRhID0gcmVzcC5kYXRhCiAgICAgICAgICAgIH0pLmNhdGNoKCAoZXJyb3IpPT57CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLmn6Xor6LlpLHotKXvvIzljp/lm6DmmK8iK2Vycm9yLmRhdGEubWVzc2FnZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBoYW5kbGVEZWxldGUgKGluZGV4ICxkYXRhKSB7CiAgICAgICAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuWIoOmZpOatpOeUqOaItywg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuJGF4aW9zLnBvc3QoIi91c2VyL2RlbGV0ZVVzZXI/aWQ9IitkYXRhLmlkKS50aGVuKHJlc3A9PnsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmRBbGxVc2VycygpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip8nCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI5Yig6ZmkJwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICB9Cn0K"},{"version":3,"sources":["UserManage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserManage.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div>\r\n        <el-button type=\"primary\" @click=\"addUser\" style=\"margin-top:50px;margin-bottom:5px;float:right;\">新增用户</el-button>\r\n        <el-table\r\n                :data=\"userData\"\r\n                border\r\n                style=\"width: 100%\">\r\n            <el-table-column\r\n                    prop=\"name\"\r\n                    label=\"中文名\"\r\n                    width=\"180\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                    prop=\"username\"\r\n                    label=\"登录名\"\r\n                    width=\"180\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                    prop=\"address\"\r\n                    label=\"地址\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                    prop=\"enabled\"\r\n                    label=\"是否启用\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-tag size=\"small\" type=\"success\" v-if=\"scope.row.enabled\">已启用</el-tag>\r\n                    <el-tag size=\"small\" type=\"danger\" v-else>未启用</el-tag>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-button\r\n                            size=\"mini\"\r\n                            @click=\"showEditView(scope.$index, scope.row)\">编辑</el-button>\r\n                    <el-button\r\n                            size=\"mini\"\r\n                            type=\"danger\"\r\n                            @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <el-dialog :title=\"dialogTitle[dialogStatus]\" :visible.sync=\"dialogFormVisible\" center>\r\n            <el-form :model=\"user\" :rules=\"rules\" ref=\"user\">\r\n                <el-form-item label=\"中文名\" :label-width=\"formLabelWidth\" prop=\"name\">\r\n                    <el-input v-model=\"user.name\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"英文名\" :label-width=\"formLabelWidth\" prop=\"username\">\r\n                    <el-input v-model=\"user.username\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"密码\" :label-width=\"formLabelWidth\" prop=\"password\">\r\n                    <el-input v-model.number=\"user.password\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"手机\" :label-width=\"formLabelWidth\" prop=\"phone\">\r\n                    <el-input v-model.number=\"user.phone\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"地址\" :label-width=\"formLabelWidth\" prop=\"address\">\r\n                    <el-input v-model.number=\"user.address\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"座机\" :label-width=\"formLabelWidth\" prop=\"telephone\">\r\n                    <el-input v-model.number=\"user.telephone\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"是否可用\" :label-width=\"formLabelWidth\" prop=\"enabled\">\r\n                    <el-switch\r\n                            v-model=\"user.enabled\"\r\n                            active-text=\"启用\"\r\n                            inactive-text=\"禁用\">\r\n                    </el-switch>\r\n                </el-form-item>\r\n            </el-form>\r\n            <div slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"submit\">确 定</el-button>\r\n            </div>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"UserManage\",\r\n        data () {\r\n            return {\r\n                userData:[],\r\n                dialogTitle: {\r\n                    addUser: \"新增用户\",\r\n                    editUser: \"编辑用户\"\r\n                },\r\n                dialogStatus: \"\",\r\n                dialogFormVisible: false,\r\n                user:{\r\n                    enabled:false\r\n                },\r\n                formLabelWidth: \"120px\",\r\n                rules: {\r\n                    name: [\r\n                        { required: true, message: '请输入姓名', trigger: 'blur' }\r\n                    ],\r\n                    username: [\r\n                        { required: true, message: '请输入登录名', trigger: 'blur' }\r\n                    ],\r\n                    password: [\r\n                        { required: true, message: '密码不能为空'},\r\n                        { type: 'number', message: '年龄必须为数字值'}\r\n                    ]\r\n                },\r\n            }\r\n        },\r\n        created() {\r\n            this.findAllUsers();\r\n        },\r\n        methods: {\r\n            showEditView (row) {\r\n                this.user = row;\r\n                this.dialogFormVisible = true;\r\n                this.dialogStatus = \"editUser\";\r\n            },\r\n            submit () {\r\n                if (this.dialogStatus === 'addUser'){\r\n                    this.submitUser();\r\n                } else if(this.dialogStatus === \"editStudent\") {\r\n                    this.editUser();\r\n                }\r\n            },\r\n            editUser () {\r\n\r\n            },\r\n            submitUser () {\r\n                this.$refs.user.validate((valid) => {\r\n                    if (valid) {\r\n                        this.$axios.post(\"/user/addUser\",this.user).then( (resp)=>{\r\n                            if (resp) {\r\n                                this.dialogFormVisible = false;\r\n                                this.user = {}\r\n                                this.$message.success(\"添加成功！\");\r\n                                this.findAllUsers();\r\n                            }\r\n                        }).catch((error)=>{\r\n                            this.$message({\r\n                                message: '添加数据失败，原因是'+error.data.message,\r\n                                type: 'error'\r\n                            })\r\n                        })\r\n                    } else {\r\n                        this.$message({\r\n                            message: '请输入所有字段',\r\n                            type: 'error'\r\n                        })\r\n                        return false;\r\n                    }\r\n                });\r\n            },\r\n            addUser () {\r\n                this.dialogFormVisible = true;\r\n                this.dialogStatus = \"addUser\";\r\n            },\r\n            findAllUsers () {\r\n                this.$axios.get(\"user/findAllUsers\").then ( (resp)=>{\r\n                    this.userData = resp.data\r\n                }).catch( (error)=>{\r\n                    this.$message({\r\n                        type: 'error',\r\n                        message: \"查询失败，原因是\"+error.data.message\r\n                    });\r\n                })\r\n            },\r\n            handleDelete (index ,data) {\r\n                this.$confirm('此操作将删除此用户, 是否继续?', '提示', {\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消',\r\n                    type: 'warning'\r\n                }).then(() => {\r\n                    this.$axios.post(\"/user/deleteUser?id=\"+data.id).then(resp=>{\r\n                        this.findAllUsers();\r\n                        this.$message({\r\n                            type: 'success',\r\n                            message: '删除成功'\r\n                        })\r\n                    })\r\n                }).catch(() => {\r\n                    this.$message({\r\n                        type: 'info',\r\n                        message: '已取消删除'\r\n                    });\r\n                });\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}